<!DOCTYPE html>
<html>

<head>
  <title>任务六：基础JavaScript练习（三）</title>
  <style type="text/css">
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  #app {
    margin: 20px;
  }

  #container {
    margin-top: 20px;
  }

  #container div {
    float: left;
    height: 100%;
    margin-left: 10px;
    padding: 5px;
    background: red;
    color: #fff;
  }

  #container div .found {
    background: #fff;
    color: #000;
  }
  </style>
</head>

<body>
  <div id="app">
    <textarea>1,3,22,53,23,54,63,22,44,66,22,53,77</textarea>
    <button id="insert">插入</button>
    <input id="searchValue" type="text" name="请输入">
    <button id="search">查询</button>
    <div id="container"></div>
  </div>
  <script type="text/javascript">
  window.onload = function() {
    var insert = document.getElementById('insert');
    var searchBtn = document.getElementById('search');
    var text = document.querySelector('textarea');
    var container = document.getElementById('container');
    var search = document.getElementById('searchValue');
    var data = [];

    insert.onclick = function() {
      var result = text.value;
      var result = result.split(/[^0-9a-zA-Z]/g);
      for (var i = 0; i < result.length; i++) {
        var oDiv = document.createElement('div');
        oDiv.innerHTML = result[i];
        container.appendChild(oDiv);
        data.push(result[i])
      }
    }

    searchBtn.onclick = function() {
      var searchValue = search.value;
      console.log(data);
      console.log(searchValue);
      container.innerHTML = data.map(function(item) {
        if (searchValue !== null && searchValue.length > 0) {
          item = item.replace(new RegExp(searchValue, 'g'), '<span class="found">' + searchValue + '</span>');
        }
        return '<div>' + item + '</div>'
      }).join('');
    }
  }
  </script>
</body>

</html>